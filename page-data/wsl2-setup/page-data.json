{"componentChunkName":"component---src-templates-blog-post-js","path":"/wsl2-setup/","result":{"data":{"site":{"siteMetadata":{"title":"Duman Codes","author":"Yadullah Duman"}},"markdownRemark":{"id":"c9992481-7424-54a7-8f78-93bb320a4187","excerpt":"Itâ€™s been a while since my last post! Actually I planned to write my next post about my side-project retro when it is mature enough, but forâ€¦","html":"<p>Itâ€™s been a while since my last post! Actually I planned to write my next post about my side-project <a href=\"https://github.com/yduman/retro\">retro</a> when it is mature enough, but for now I wanted to share with you my recent WSL2 setup on my new workstation which was ridiculously easy to do!</p>\n<h2>What I wanted</h2>\n<p>Basically I wanted the same setup that I would run on my MacBook and my Linux machines:</p>\n<ul>\n<li>A configurable terminal similar to <a href=\"https://www.iterm2.com/\">iTerm2</a> or <a href=\"https://gnunn1.github.io/tilix-web/\">Tilix</a></li>\n<li>ZSH shell with <a href=\"https://ohmyz.sh/\">oh-my-zsh</a></li>\n<li><a href=\"https://github.com/romkatv/powerlevel10k\">Powerlevel10k</a> theme</li>\n<li>Docker and VS Code support</li>\n</ul>\n<h2>What you can expect</h2>\n<p>In the following, I will guide you step by step on how I did my setup.\nYour end result might look like this for example:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/f5e267b658e43e00080ab0b484e24634/0bdcb/wsl2-example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.21621621621622%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABO0lEQVQoz42RSU7DQBBFfQI2IBYIhUFKHNux293Vk+dMisj9D/SpdmJDgAWLpy4P9fSrOnp+ecXz2xIPTwvc3T9i8b6AchqFZISCKOlfSDJQZBGZ/gC3PUO1J2x0j8IYpFojER5pYRFnGquMsEqJaxqff0MzUdUd0W0/YOsdStOi1N0I2R7ab7EpPZLcIBNuPKfG9UYzdEXPRIIa+GqHod6jYgnJGkq3KFTN4nYk/KP9gFxWN82Bn/IoVw2K0Gh6SDtA2RrSNRD8LqQL4iCaTkGXc5nIWfYl5YTV4QS3PyP3B+QsFM4iIYV14VjeQZpuHpnccN0rjamza30zcj2cQLyrOLcoqOWUDdcKMX+0vAbfHkdZINQh3SpV436n+kaYGb5NvoyYemSG92SI03LK8jLWNFrg+5hB9NfIn3MH+zSKmQNXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"WSL2 inside Windows Terminal possible result\"\n        title=\"WSL2 inside Windows Terminal possible result\"\n        src=\"/blog/static/f5e267b658e43e00080ab0b484e24634/fcda8/wsl2-example.png\"\n        srcset=\"/blog/static/f5e267b658e43e00080ab0b484e24634/12f09/wsl2-example.png 148w,\n/blog/static/f5e267b658e43e00080ab0b484e24634/e4a3f/wsl2-example.png 295w,\n/blog/static/f5e267b658e43e00080ab0b484e24634/fcda8/wsl2-example.png 590w,\n/blog/static/f5e267b658e43e00080ab0b484e24634/efc66/wsl2-example.png 885w,\n/blog/static/f5e267b658e43e00080ab0b484e24634/c83ae/wsl2-example.png 1180w,\n/blog/static/f5e267b658e43e00080ab0b484e24634/0bdcb/wsl2-example.png 1579w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>As you can see, the shell runs inside Windows Terminal with the Powerlevel10k theme, syntax highlighting, automatic suggestions and Docker.</p>\n<h3>Prerequisites</h3>\n<p>You will need the Windows 2004 update and you have to enable virtualization on your BIOS.</p>\n<h3>Step 1: Install WSL2</h3>\n<ul>\n<li>Basically, you have to follow <a href=\"https://docs.microsoft.com/en-us/windows/wsl/install-win10\">these</a> steps from the Microsoft Docs </li>\n<li>Here are the necessary steps, if you have a fresh installation of Windows 2004:</li>\n</ul>\n<p>Open PowerShell as Administrator and run the following commands:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token comment\"># Install WSL</span>\ndism<span class=\"token punctuation\">.</span>exe <span class=\"token operator\">/</span>online <span class=\"token operator\">/</span><span class=\"token function\">enable-feature</span> <span class=\"token operator\">/</span>featurename:Microsoft<span class=\"token operator\">-</span>Windows<span class=\"token operator\">-</span>Subsystem<span class=\"token operator\">-</span>Linux <span class=\"token operator\">/</span>all <span class=\"token operator\">/</span>norestart\n\n<span class=\"token comment\"># Enable Virtual Machine Platform</span>\ndism<span class=\"token punctuation\">.</span>exe <span class=\"token operator\">/</span>online <span class=\"token operator\">/</span><span class=\"token function\">enable-feature</span> <span class=\"token operator\">/</span>featurename:VirtualMachinePlatform <span class=\"token operator\">/</span>all <span class=\"token operator\">/</span>norestart</code></pre></div>\n<p>After these two commands, restart your machine and run the next command to set WSL2 as your default version:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token comment\"># Use WSL2 per default</span>\nwsl <span class=\"token operator\">--</span><span class=\"token function\">set-default</span><span class=\"token operator\">-</span>version 2</code></pre></div>\n<h3>Step 2: Install a Linux Distribution and Windows Terminal</h3>\n<ul>\n<li>Visit the Windows Store and install your desired Linux distribution and Windows Terminal. I chose the latest LTS version of Ubuntu for example, which is currently Ubuntu 20.04</li>\n<li>After installing your distribution you have to launch it and it will ask you for a username and password</li>\n</ul>\n<h3>Step 4: Configure Windows Terminal</h3>\n<ul>\n<li>Open Windows Terminal and open the settings with the <code class=\"language-text\">Ctrl + ,</code> shortcut. You should see the file <code class=\"language-text\">settings.json</code></li>\n<li>I wanted WSL2 to be my main profile. You can achieve this by copying the <code class=\"language-text\">guid</code> value of your Linux distribution into <code class=\"language-text\">defaultProfile</code></li>\n<li>After that I wanted a better colorscheme than the default one. There are some pre-defined ones that you can select from <a href=\"https://docs.microsoft.com/en-US/windows/terminal/customize-settings/color-schemes\">here</a></li>\n<li>The colorscheme on the screenshot is called <code class=\"language-text\">One Half Dark</code>. To add a colorscheme, expand the profile configuration of your distribution with the key <code class=\"language-text\">colorScheme</code> and the value of the theme name as a string</li>\n<li>Next thing for me was to change the starting directory to my Linux home directory. For that, expand the profile object with <code class=\"language-text\">&quot;commandline&quot;: &quot;wsl.exe ~&quot;</code></li>\n<li>Lastly, since I wanted to use Powerlevel10k, I had to install their <a href=\"https://github.com/romkatv/powerlevel10k#meslo-nerd-font-patched-for-powerlevel10k\">recommended</a> font <code class=\"language-text\">MesloLGS NF</code>. After installing, expand your profile object with <code class=\"language-text\">&quot;fontFace&quot;: &quot;MesloLGS NF&quot;</code></li>\n</ul>\n<p>Ultimately, you should have an object similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"guid\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{some-value}\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"hidden\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Ubuntu-20.04\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Windows.Terminal.Wsl\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"colorScheme\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"One Half Dark\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"fontFace\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MesloLGS NF\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"commandline\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wsl.exe ~\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Step 5: Install oh-my-zsh</h3>\n<p>Run these commands:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> <span class=\"token function\">zsh</span>\n$ <span class=\"token function\">sh</span> -c <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class=\"token variable\">)</span></span>\"</span></code></pre></div>\n<p>You may want to restart Windows Terminal for a new session.</p>\n<h3>Step 6: Install useful plugins and configure ZSH</h3>\n<ul>\n<li><a href=\"https://github.com/zsh-users/zsh-autosuggestions\">zsh-autosuggestions</a></li>\n<li><a href=\"https://github.com/zsh-users/zsh-syntax-highlighting\">zsh-syntax-highlighting</a></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> clone https://github.com/zsh-users/zsh-autosuggestions <span class=\"token variable\">${ZSH_CUSTOM<span class=\"token operator\">:-</span>~<span class=\"token operator\">/</span>.oh-my-zsh<span class=\"token operator\">/</span>custom}</span>/plugins/zsh-autosuggestions\n$ <span class=\"token function\">git</span> clone https://github.com/zsh-users/zsh-syntax-highlighting.git <span class=\"token variable\">${ZSH_CUSTOM<span class=\"token operator\">:-</span>~<span class=\"token operator\">/</span>.oh-my-zsh<span class=\"token operator\">/</span>custom}</span>/plugins/zsh-syntax-highlighting\n$ <span class=\"token function\">git</span> clone --depth<span class=\"token operator\">=</span><span class=\"token number\">1</span> https://github.com/romkatv/powerlevel10k.git <span class=\"token variable\">${ZSH_CUSTOM<span class=\"token operator\">:-</span>~<span class=\"token operator\">/</span>.oh-my-zsh<span class=\"token operator\">/</span>custom}</span>/themes/powerlevel10k</code></pre></div>\n<p>Open <code class=\"language-text\">~/.zshrc</code> and modify its content like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Use Powerlevel10k theme\nZSH_THEME=&quot;powerlevel10k/powerlevel10k&quot;\n\n# Use plugins\nplugins=(docker zsh-autosuggestions zsh-syntax-highlighting)</code></pre></div>\n<p>After setting the theme, the Powerlevel10k wizard should show up, which will guide you through the setup. If it did not show up then try to run <code class=\"language-text\">p10k configure</code>. More about <a href=\"https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins\">oh-my-zsh plugins</a> and <a href=\"https://github.com/romkatv/powerlevel10k#configuration\">Powerlevel10k configuration</a>.</p>\n<h3>Step 7: Docker and VS Code</h3>\n<p>Docker also supports Windows Home since the 2004 update! Follow their guideline <a href=\"https://docs.docker.com/docker-for-windows/install-windows-home/\">Install Docker Desktop on Windows Home</a>. After the installation Docker should automatically use the WSL2 backend. That was at least the case for me. If it wasnâ€™t for you, then please follow this <a href=\"https://docs.docker.com/docker-for-windows/wsl/\">documentation</a>.</p>\n<p>VS Code has of course great support for development inside WSL2 with this <a href=\"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl\">extension</a>. The README should be sufficient documentation.</p>\n<h2>And weâ€™re done ðŸŽ‰</h2>\n<p>With this setup you should have a full-blown development setup inside WSL2 and a nice looking Windows Terminal. I am very pleased with this setup and since the last years Microsoft keeps surprising me everytime! </p>\n<p>I feel like these timesâ€¦</p>\n<img src=\"https://media.giphy.com/media/MGYY2FIs8VrfW/giphy.gif\">\n<p>â€¦are over.</p>","timeToRead":4,"frontmatter":{"title":"How to setup WSL2 with Windows Terminal, oh-my-zsh and powerlevel10k","date":"June 12, 2020","spoiler":"Sharing my WSL2 setup. It was surprisingly easy!"},"fields":{"slug":"/wsl2-setup/"}}},"pageContext":{"slug":"/wsl2-setup/","previous":{"fields":{"slug":"/useContext-usage/"},"frontmatter":{"title":"How to use Context in React with Hooks"}},"next":{"fields":{"slug":"/rmby/"},"frontmatter":{"title":"rmby - A Node.js library for removing files asynchronously with a fluent interface"}}}},"staticQueryHashes":["336482444"]}